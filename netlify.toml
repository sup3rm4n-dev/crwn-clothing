[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  # base = "project/"

  # Directory that stores our lambda serverless functions
  # functions = "built-lambda" # netlify-lambda builds to this folder AND Netlify reads functions from here

  # Default build command.
  command = "yarn build"

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "build/"

# The following redirect is intended for use with most SPAs that handle
# routing internally.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "https://crwnclothing.netlify.com/*"
  to = "https://www.crown-clothes.com/"
  force = true
  status = 301

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    # Content-Security-Policy = "font-src='none'"
    # Add  preload ; to end when ready for HSTS
    Strict-Transport-Security = "max-age=63072000; includeSubDomains;"
    cache-control = '''
    max-age=0,
    no-cache,
    no-store,
    must-revalidate'''

[build.processing]
  skip_processing = false
[build.processing.css]
  bundle = false
  minify = true
[build.processing.js]
  bundle = false
  minify = true
[build.processing.html]
  pretty_urls = false
[build.processing.images]
  compress = true

[[plugins]]
  package = "netlify-plugin-subfont"